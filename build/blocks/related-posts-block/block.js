(()=>{"use strict";var t={n:e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return t.d(r,{a:r}),r},d:(e,r)=>{for(var o in r)t.o(r,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:r[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};const e=window.wp.apiFetch;var r=t.n(e);const o=window.wp.blocks,n=window.wp.i18n;function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function i(){return i=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)({}).hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},i.apply(null,arguments)}function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){u(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function u(t,e,r){return(e=function(t){var e=function(t){if("object"!=a(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==a(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}(0,o.registerBlockVariation)("core/query",{name:"gutty/related-posts-query",title:(0,n.__)("Related Posts","gutty-related-posts"),category:"theme",isActive:["namespace"],attributes:{namespace:"gutty/related-posts-query",query:{perPage:3,postType:"post",pagination:!1,pages:0,offset:0},align:"wide"},allowedControls:["order","author","postType","sticky","taxQuery"],innerBlocks:[["core/heading",{level:2,content:(0,n.__)("Related Posts","gutty-related-posts")}],["core/post-template",{layout:{type:"grid",columnCount:3,columnGap:"2rem",rowGap:"2rem"}},[["core/post-featured-image",{isLink:!0}],["core/post-title",{level:3,isLink:!0}],["core/post-excerpt",{moreText:(0,n.__)("Read More","gutty-related-posts")}]]],["core/query-no-results",{},[["core/paragraph",{content:(0,n.__)("No related posts were found.","gutty-related-posts")}]]]]}),wp.hooks.addFilter("editor.BlockEdit","gutty/related-posts",(function(t){return function(e){if("core/query"===e.name&&"gutty/related-posts-query"===e.attributes.namespace){var o=e.attributes.query,n=void 0===o?{}:o;if(!n.postIn){var a=wp.data.select("core/editor").getCurrentPostId(),s=n.perPage||3;r()({path:"/gutty-related-posts/v1/gutty-related-posts?numPosts=".concat(s,"&post_id=").concat(a)}).then((function(t){e.setAttributes({query:c(c({},n),{},{postIn:t.map((function(t){return t.id}))})})})).catch((function(){e.setAttributes({query:c(c({},n),{},{postIn:[]})})}))}}return React.createElement(t,i({key:"edit"},e))}}))})();